-- Lust ap spammer (ULTRA COMPACT)

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TextChatService = game:GetService("TextChatService")

local LocalPlayer = Players.LocalPlayer

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "Lust APSpammer"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- EXTRA SMALL Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.fromOffset(180, 200)
MainFrame.Position = UDim2.fromScale(0.5, 0.45)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0, 28)
TitleBar.BackgroundColor3 = Color3.fromRGB(165, 162,95)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 12)
TitleCorner.Parent = TitleBar

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, -28, 1, 0)
TitleLabel.Position = UDim2.new(0, 6, 0, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "Lust AP Spam"
TitleLabel.TextColor3 = Color3.fromRGB(75,90,555)
TitleLabel.TextScaled = true
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Parent = TitleBar

-- Minimize Button
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Size = UDim2.new(0, 21, 0, 25)
MinimizeButton.Position = UDim2.new(1, -24, 0, 3)
MinimizeButton.Text = "-"
MinimizeButton.TextScaled = true
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.TextColor3 = Color3.fromRGB(175,57,785)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(215,29,55)
MinimizeButton.Parent = TitleBar

local MinCorner = Instance.new("UICorner")
MinCorner.CornerRadius = UDim.new(0, 6)
MinCorner.Parent = MinimizeButton

-- Player List
local Scroll = Instance.new("ScrollingFrame")
Scroll.Position = UDim2.new(0, 0, 0, 32)
Scroll.Size = UDim2.new(1, 0, 1, -34)
Scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
Scroll.ScrollBarImageColor3 = Color3.fromRGB(80,20,155)
Scroll.BackgroundTransparency = 1
Scroll.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Padding = UDim.new(0, 4)
UIListLayout.Parent = Scroll

-- Dragging
local dragging = false
local dragStart, startPos

TitleBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 
	or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement 
	or input.UserInputType == Enum.UserInputType.Touch) then
		
		local delta = input.Position - dragStart
		MainFrame.Position = UDim2.new(
			startPos.X.Scale,
			startPos.X.Offset + delta.X,
			startPos.Y.Scale,
			startPos.Y.Offset + delta.Y
		)
	end
end)

UserInputService.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 
	or input.UserInputType == Enum.UserInputType.Touch then
		dragging = false
	end
end)

-- Minimize
local minimized = false
local normalSize = MainFrame.Size

MinimizeButton.MouseButton1Click:Connect(function()
	minimized = not minimized
	
	if minimized then
		Scroll.Visible = false
		MainFrame.Size = UDim2.fromOffset(180, 28)
		MinimizeButton.Text = "+"
	else
		Scroll.Visible = true
		MainFrame.Size = normalSize
		MinimizeButton.Text = "-"
	end
end)

-- Send Commands (space format)
local function sendCommands(targetName)
	local commands = {
		";balloon "..targetName,
		";rocket "..targetName,
		";morph "..targetName,
		";jumpscare "..targetName,
		";jail "..targetName
	}

	local channel = TextChatService.TextChannels.RBXGeneral
	for _, cmd in ipairs(commands) do
		channel:SendAsync(cmd)
		task.wait(0.12)
	end
end

-- Player Buttons
local function createPlayerButton(player)
	if player == LocalPlayer then return end
	
	local Button = Instance.new("TextButton")
	Button.Size = UDim2.new(1, -6, 0, 24)
	Button.BackgroundColor3 = Color3.fromRGB(170,941,31)
	Button.TextColor3 = Color3.fromRGB(55,55,55)
	Button.TextScaled = true
	Button.Font = Enum.Font.Gotham
	Button.Text = player.Name
	Button.Parent = Scroll
	
	local Corner = Instance.new("UICorner")
	Corner.CornerRadius = UDim.new(0, 6)
	Corner.Parent = Button
	
	Button.MouseButton1Click:Connect(function()
		sendCommands(player.Name)
	end)
end

-- Refresh List
local function refreshList()
	for _, child in pairs(Scroll:GetChildren()) do
		if child:IsA("TextButton") then
			child:Destroy()
		end
	end
	
	for _, player in pairs(Players:GetPlayers()) do
		createPlayerButton(player)
	end
	
	task.wait()
	Scroll.CanvasSize = UDim2.new(0,0,0,UIListLayout.AbsoluteContentSize.Y + 4)
end

Players.PlayerAdded:Connect(refreshList)
Players.PlayerRemoving:Connect(refreshList)

refreshList()
